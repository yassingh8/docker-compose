version: '3'
services:
  config:
    image: 10.0.1.11:5000/config_server
    container_name: config
    restart: on-failure
    networks:
      - utils
    ports:
      - 8888:8888
  
  eureka:
    image: 10.0.1.11:5000/eureka_server
    container_name: eureka
    networks:
      - utils
    command: ./wait-for-it.sh www.google.com:80 -- echo "google is up"
    ports:
      - 8761:8761
    restart: on-failure
    depends_on:
      - config
      
  zuul:
    image: 10.0.1.11:5000/zuul_server
    container_name: zuul
    networks:
      - utils
    ports:
      - 8762:8762
    restart: on-failure
    depends_on:
      - eureka
      - config
    command: ["/wait-for-it.sh", "localhost:8761", "--", "java","-jar","/app.jar"]
    
networks:
  utils:
